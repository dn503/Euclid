//
//  SceneViewController.swift
//  Example
//
//  Created by Nick Lockwood on 11/12/2018.
//  Copyright Â© 2018 Nick Lockwood. All rights reserved.
//

import Euclid
import SceneKit
import UIKit

class SceneViewController: UIViewController {
    override func viewDidLoad() {
        super.viewDidLoad()

        // create a new scene
        let scene = SCNScene()

        // create and add a camera to the scene
        let cameraNode = SCNNode()
        cameraNode.camera = SCNCamera()
        scene.rootNode.addChildNode(cameraNode)

        // place the camera
        cameraNode.position = SCNVector3(0, 0, 3)

        // create some geometry using Euclid
        let start = CFAbsoluteTimeGetCurrent()
        let cube = Mesh.cube(size: 0.8, material: UIColor.red)
        let sphere = Mesh.sphere(slices: 120, material: UIColor.blue)
        let mesh = Mesh.extrude(.square(size: 0.01), along: Path([PathPoint(Vector(0.1622081548, 0.07716102898, -0.21011304855000001), isCurved: false), PathPoint(Vector(0.16147956252, 0.07850745320000001, -0.20958851278), isCurved: true), PathPoint(Vector(0.16074767709, 0.07986433804000001, -0.20908334851000002), isCurved: true), PathPoint(Vector(0.15981836617, 0.08128874749000001, -0.20857453346000002), isCurved: true), PathPoint(Vector(0.15889008343000002, 0.08265981823000002, -0.20832286775000003), isCurved: true), PathPoint(Vector(0.15789218247, 0.08413729817000001, -0.20803828537000002), isCurved: true), PathPoint(Vector(0.15674355626000003, 0.08577340096000001, -0.20780375600000003), isCurved: true), PathPoint(Vector(0.15552844107000002, 0.08759415150000001, -0.20768541098), isCurved: true), PathPoint(Vector(0.15429650247, 0.08957462013, -0.20774322748000001), isCurved: true), PathPoint(Vector(0.1532677412, 0.09155089408000001, -0.20808717608000002), isCurved: true), PathPoint(Vector(0.15232291818000002, 0.09351097047000001, -0.20891241729), isCurved: true), PathPoint(Vector(0.15123939514, 0.09552530199, -0.20996333659000002), isCurved: true), PathPoint(Vector(0.15017861128, 0.09732770920000001, -0.21133613586000002), isCurved: true), PathPoint(Vector(0.14912755787, 0.09887824953, -0.21308943629000002), isCurved: true), PathPoint(Vector(0.14826090634000003, 0.10015252233000001, -0.21534611285000002), isCurved: true), PathPoint(Vector(0.14770254493, 0.10109271109000001, -0.21816092730000003), isCurved: true), PathPoint(Vector(0.14765040576000002, 0.10177227855000001, -0.22144570947000003), isCurved: true), PathPoint(Vector(0.14789035916, 0.10192490369000001, -0.22517523170000003), isCurved: true), PathPoint(Vector(0.14833244681000002, 0.10156580806000001, -0.22912855446000002), isCurved: true), PathPoint(Vector(0.14885422587000002, 0.10067509115, -0.23313805461000003), isCurved: true), PathPoint(Vector(0.14937306941, 0.09917314351, -0.23708564043000002), isCurved: true), PathPoint(Vector(0.14986549318, 0.09706136584000001, -0.24090136588000002), isCurved: true), PathPoint(Vector(0.15031287074000002, 0.09437146783000001, -0.24464853108000004), isCurved: true), PathPoint(Vector(0.15095129609000002, 0.09123653173000001, -0.24823841453000003), isCurved: true), PathPoint(Vector(0.15176388621, 0.08767197281000001, -0.25167548656000005), isCurved: true), PathPoint(Vector(0.15264341235, 0.08362125605000001, -0.25485420227000005), isCurved: true), PathPoint(Vector(0.15345358849000001, 0.07909046859, -0.25762799382), isCurved: true), PathPoint(Vector(0.15407995880000003, 0.07417608052, -0.25986486673000003), isCurved: true), PathPoint(Vector(0.1545458734, 0.06919906288000001, -0.26126229763000003), isCurved: true), PathPoint(Vector(0.15483425558000002, 0.06416971236, -0.2622384727), isCurved: true), PathPoint(Vector(0.15502265096, 0.05934673548, -0.26273536682000004), isCurved: true), PathPoint(Vector(0.15509738028, 0.054838456210000004, -0.26274463534000003), isCurved: true), PathPoint(Vector(0.15502415597000002, 0.050635881720000005, -0.26226478815000004), isCurved: true), PathPoint(Vector(0.15476432443000002, 0.046676091850000004, -0.26130110025000003), isCurved: true), PathPoint(Vector(0.15460531414, 0.04345655441000001, -0.25943058729), isCurved: true), PathPoint(Vector(0.15413919091000003, 0.04048583657, -0.25754761696), isCurved: true), PathPoint(Vector(0.15344254673000002, 0.038023740050000004, -0.25548502803), isCurved: true), PathPoint(Vector(0.15257485211000002, 0.03609214723, -0.25323951244000004), isCurved: true), PathPoint(Vector(0.15155540407, 0.034629590810000006, -0.25084862113), isCurved: true), PathPoint(Vector(0.15044024587000002, 0.033569917080000004, -0.24837550521), isCurved: true), PathPoint(Vector(0.14929261804000002, 0.0331690684, -0.24563579261000001), isCurved: true), PathPoint(Vector(0.14803695679, 0.03294140846, -0.24302533269), isCurved: true), PathPoint(Vector(0.14668092132000002, 0.03304573148, -0.24048413336000002), isCurved: true), PathPoint(Vector(0.1452717483, 0.03346594423, -0.23800346255000002), isCurved: true), PathPoint(Vector(0.14383614063000003, 0.03415014595, -0.23557332158000002), isCurved: true), PathPoint(Vector(0.14243118465000001, 0.03511634469, -0.23321257532000003), isCurved: true), PathPoint(Vector(0.14098721743, 0.03648978472, -0.23083230853000003), isCurved: true), PathPoint(Vector(0.13960945606000003, 0.03815599531, -0.2285413444), isCurved: true), PathPoint(Vector(0.13828985393, 0.040070243180000006, -0.22627390921), isCurved: true), PathPoint(Vector(0.13701857626000002, 0.04215922207, -0.22397582233000002), isCurved: true), PathPoint(Vector(0.1357973963, 0.04439144582000001, -0.22163161635000003), isCurved: true), PathPoint(Vector(0.1346616894, 0.04676619172, -0.21925368905000003), isCurved: true), PathPoint(Vector(0.13345897198, 0.049206458030000004, -0.21690131724000003), isCurved: true), PathPoint(Vector(0.13259087503000003, 0.051967389880000006, -0.21459165215000003), isCurved: true), PathPoint(Vector(0.13194510341000001, 0.054985672240000005, -0.21231526136000003), isCurved: true), PathPoint(Vector(0.13144668937, 0.058132469650000004, -0.21004085243), isCurved: true), PathPoint(Vector(0.13112455606, 0.061344392600000006, -0.20778782666), isCurved: true), PathPoint(Vector(0.13094745576000003, 0.06462077051000001, -0.20555485785000002), isCurved: true), PathPoint(Vector(0.1308683008, 0.06786154956000001, -0.2033714205), isCurved: true), PathPoint(Vector(0.13098406792, 0.07128197700000001, -0.20128561556000002), isCurved: true), PathPoint(Vector(0.13133502007, 0.07484046370000001, -0.19939352572000002), isCurved: true), PathPoint(Vector(0.13188405335, 0.07842552662, -0.19771695137000003), isCurved: true), PathPoint(Vector(0.13255636394, 0.0819375813, -0.19624900818000002), isCurved: true), PathPoint(Vector(0.13332368433000003, 0.08525848389000001, -0.19499367476), isCurved: true), PathPoint(Vector(0.13403442502000001, 0.08823309094000001, -0.19382095337000002), isCurved: true), PathPoint(Vector(0.13497316837, 0.09111459553000001, -0.19302138686000003), isCurved: true), PathPoint(Vector(0.13608513772000003, 0.09392581135000001, -0.19255055487000003), isCurved: true), PathPoint(Vector(0.13739563525, 0.09665345401000001, -0.19242815673000002), isCurved: true), PathPoint(Vector(0.13887533545000003, 0.09924141318000002, -0.19263607264000002), isCurved: true), PathPoint(Vector(0.14043369889, 0.10160720348, -0.19312329590000002), isCurved: true), PathPoint(Vector(0.14195549488, 0.10366635025000001, -0.19382143021), isCurved: true), PathPoint(Vector(0.14356742799000002, 0.10541237891, -0.19482830167), isCurved: true), PathPoint(Vector(0.14518705010000002, 0.10677310079, -0.19609622657000003), isCurved: true), PathPoint(Vector(0.14677755535, 0.10770377517000002, -0.19759419560000002), isCurved: true), PathPoint(Vector(0.148363024, 0.10818038136000001, -0.19931071997000002), isCurved: true), PathPoint(Vector(0.1499773711, 0.10824802518000001, -0.20123091340000002), isCurved: true), PathPoint(Vector(0.15152649581000002, 0.10795249045000001, -0.20323477685000002), isCurved: true), PathPoint(Vector(0.15309318900000002, 0.10734618455000002, -0.20534926653000002), isCurved: true), PathPoint(Vector(0.15458096564, 0.10643099993, -0.20743411779), isCurved: true), PathPoint(Vector(0.15589472651000003, 0.10529044271000002, -0.20938098431000002), isCurved: true), PathPoint(Vector(0.15709632635, 0.10403935611000001, -0.21119010448000003), isCurved: true), PathPoint(Vector(0.15824268758, 0.10275258124000002, -0.21286843717), isCurved: true), PathPoint(Vector(0.15921798348000002, 0.10131409764000002, -0.21465560794000002), isCurved: true), PathPoint(Vector(0.16012836993000001, 0.10000094026, -0.21610504389000001), isCurved: true), PathPoint(Vector(0.16092500091, 0.09879993647000002, -0.21734356880000003), isCurved: true), PathPoint(Vector(0.16157068312, 0.09766124934, -0.21843339503000003), isCurved: true), PathPoint(Vector(0.16211046278000002, 0.09649912268000001, -0.21945518255000002), isCurved: true), PathPoint(Vector(0.16252942383000002, 0.09528452158, -0.22043929994000003), isCurved: true), PathPoint(Vector(0.16306543350000002, 0.09420359880000001, -0.22144755721000003), isCurved: true), PathPoint(Vector(0.16330045462, 0.09298609942000001, -0.2224111706), isCurved: true), PathPoint(Vector(0.16333290935000003, 0.09164196998000002, -0.22334519029000002), isCurved: true), PathPoint(Vector(0.16322523355000002, 0.09020857513000001, -0.22426684201000002), isCurved: true), PathPoint(Vector(0.16299858689000002, 0.08871901780000001, -0.22517439723000002), isCurved: true), PathPoint(Vector(0.16264630854, 0.0871822685, -0.22604420781000004), isCurved: true), PathPoint(Vector(0.16221170127, 0.08574096113000002, -0.22678758204000002), isCurved: true), PathPoint(Vector(0.16157083213, 0.08418393880000001, -0.22744612396000002), isCurved: true), PathPoint(Vector(0.16078490019000002, 0.08263511211, -0.22800223529000002), isCurved: true), PathPoint(Vector(0.15991333127000001, 0.08118195087, -0.22848029435000003), isCurved: true), PathPoint(Vector(0.15898872912, 0.07983116806000001, -0.22889724374000003), isCurved: true), PathPoint(Vector(0.15798553824000003, 0.07851523906, -0.22923363745000003), isCurved: true), PathPoint(Vector(0.15693551302000003, 0.07724300772, -0.22957085073000003), isCurved: true), PathPoint(Vector(0.15580272675, 0.0760647133, -0.22983285785000002), isCurved: true), PathPoint(Vector(0.15465195477000002, 0.07498114556, -0.23010124266), isCurved: true), PathPoint(Vector(0.15349005163, 0.07397522777000001, -0.23040780425000001), isCurved: true), PathPoint(Vector(0.15231326222000002, 0.07303879410000001, -0.23076665401000002), isCurved: true), PathPoint(Vector(0.15113022923000002, 0.07218832523, -0.23120835423000002), isCurved: true), PathPoint(Vector(0.15005668998000002, 0.0714841783, -0.23160162568000003), isCurved: true), PathPoint(Vector(0.14890381694000002, 0.07073833793, -0.23217202723000002), isCurved: true), PathPoint(Vector(0.14772824943, 0.06994550675000001, -0.23285131156000002), isCurved: true), PathPoint(Vector(0.1465023756, 0.06913584471, -0.23359283805000003), isCurved: true), PathPoint(Vector(0.14523157477, 0.06829086691000001, -0.23438212276000003), isCurved: true), PathPoint(Vector(0.14393228292000002, 0.06744075567, -0.23523156345000001), isCurved: true), PathPoint(Vector(0.14260317385000001, 0.06664510816000001, -0.23597204685000003), isCurved: true), PathPoint(Vector(0.14123918116, 0.06575195491000001, -0.23688228428000002), isCurved: true), PathPoint(Vector(0.13980723917000001, 0.06472917646000001, -0.23786517978000002), isCurved: true), PathPoint(Vector(0.13831053674000002, 0.06356754899, -0.23888723552000002), isCurved: true), PathPoint(Vector(0.13679300249, 0.062332823870000005, -0.23995317519000003), isCurved: true), PathPoint(Vector(0.13527244329000002, 0.06112449616000001, -0.24107980728000003), isCurved: true), PathPoint(Vector(0.13374391198000002, 0.05998601019000001, -0.24226555228000002), isCurved: true), PathPoint(Vector(0.13222634792000001, 0.058948628600000004, -0.24350552261000002), isCurved: true), PathPoint(Vector(0.13070482016, 0.05792606622, -0.24479085207000004), isCurved: true), PathPoint(Vector(0.12919583917000002, 0.05685260147000001, -0.24610412121000003), isCurved: true), PathPoint(Vector(0.12770032883000002, 0.05576253682000001, -0.24739372730000003), isCurved: true), PathPoint(Vector(0.12619313598, 0.05475117266000001, -0.24857655168000004), isCurved: true), PathPoint(Vector(0.12469244003000002, 0.053972370920000005, -0.24954001606000004), isCurved: true), PathPoint(Vector(0.12318869680000001, 0.053449250760000004, -0.25031229854000003), isCurved: true), PathPoint(Vector(0.12172815204000001, 0.05332502723, -0.25085791945), isCurved: true), PathPoint(Vector(0.12034466863000001, 0.05362413079000001, -0.25114989281000005), isCurved: true), PathPoint(Vector(0.11904966831000001, 0.054337829350000005, -0.25115433335000004), isCurved: true), PathPoint(Vector(0.11786988378000002, 0.05547284335000001, -0.25084325671), isCurved: true), PathPoint(Vector(0.11695629358000001, 0.05702783912000001, -0.25022932887000005), isCurved: true), PathPoint(Vector(0.11603720486, 0.05907180160000001, -0.24928465486000004), isCurved: true), PathPoint(Vector(0.11522850394000002, 0.06151843071000001, -0.24809744954000001), isCurved: true), PathPoint(Vector(0.11461966485000001, 0.06424073875000001, -0.24677364528000004), isCurved: true), PathPoint(Vector(0.11426359415000001, 0.06711762398000001, -0.24540203810000003), isCurved: true), PathPoint(Vector(0.11420534551000001, 0.0701302141, -0.24406580627000002), isCurved: true), PathPoint(Vector(0.11441211402000001, 0.07325910032, -0.24291147292000004), isCurved: true), PathPoint(Vector(0.11487156153000001, 0.07653141767, -0.24171647429), isCurved: true), PathPoint(Vector(0.11554177105, 0.07974959910000001, -0.24050159752000003), isCurved: true), PathPoint(Vector(0.11639671028000001, 0.08283766359000001, -0.23926456273000002), isCurved: true), PathPoint(Vector(0.11741219461, 0.08581250906000001, -0.23798242211000004), isCurved: true), PathPoint(Vector(0.11857286841000002, 0.08866112679, -0.23663815856000003), isCurved: true), PathPoint(Vector(0.11970998347000002, 0.09122887999000001, -0.23539529741000004), isCurved: true), PathPoint(Vector(0.12108542025, 0.09374012798, -0.23399707675000003), isCurved: true), PathPoint(Vector(0.12263604999000001, 0.09613417089000001, -0.23251134157000003), isCurved: true), PathPoint(Vector(0.12434583157000001, 0.09835445881, -0.23094199598000004), isCurved: true), PathPoint(Vector(0.12617185712, 0.10044615716000001, -0.22925664485000002), isCurved: true), PathPoint(Vector(0.13007466495, 0.10427069664000001, -0.22568842769000003), isCurved: true), PathPoint(Vector(0.13220719993000002, 0.10606148839000001, -0.22367170453000002), isCurved: true), PathPoint(Vector(0.13445466757000002, 0.10771009326000001, -0.22149354219000003), isCurved: true), PathPoint(Vector(0.13685050607000002, 0.10919870436000001, -0.21923586726000002), isCurved: true), PathPoint(Vector(0.14202859998, 0.11178628355000002, -0.21447463334000003), isCurved: true), PathPoint(Vector(0.14462724328, 0.11286765337000002, -0.21194441617), isCurved: true), PathPoint(Vector(0.14720362425000003, 0.11381834745000001, -0.20933407545000002), isCurved: true), PathPoint(Vector(0.14977329969000003, 0.11465160549000002, -0.20673984289000003), isCurved: true), PathPoint(Vector(0.15237756073000003, 0.11541704088000002, -0.20423501730000002), isCurved: true), PathPoint(Vector(0.15754856169, 0.11665639281000001, -0.19965764880000003), isCurved: true), PathPoint(Vector(0.1600766778, 0.11703874171, -0.19776010513000003), isCurved: true), PathPoint(Vector(0.16246896982, 0.11709015071000001, -0.1959207058), isCurved: true), PathPoint(Vector(0.16451460123000003, 0.11673329771000002, -0.19407679141000003), isCurved: true), PathPoint(Vector(0.16604246199000003, 0.11592445523000001, -0.19217887521000002), isCurved: true), PathPoint(Vector(0.1671012044, 0.11470107734000001, -0.19030737877), isCurved: true), PathPoint(Vector(0.16786140203000002, 0.11315467954000001, -0.18859644234000003), isCurved: true), PathPoint(Vector(0.16839514673000003, 0.11148510873000002, -0.18716301024), isCurved: true), PathPoint(Vector(0.16877068579, 0.10967820138, -0.18592664599000003), isCurved: true), PathPoint(Vector(0.16885575652, 0.10776659846000002, -0.18478621542), isCurved: true), PathPoint(Vector(0.16840635240000001, 0.10571114719000001, -0.18361598253000003), isCurved: true), PathPoint(Vector(0.16746956110000003, 0.10348707438000002, -0.18244406581000003), isCurved: true), PathPoint(Vector(0.16615310311, 0.10114775598, -0.1813403815), isCurved: true), PathPoint(Vector(0.16482448578000003, 0.09896031022000001, -0.18021735549), isCurved: true), PathPoint(Vector(0.16324993968, 0.09672510624000001, -0.17936761677000002), isCurved: true), PathPoint(Vector(0.16153284907, 0.09461485595, -0.17867349088), isCurved: true), PathPoint(Vector(0.15970839560000002, 0.09265667945000002, -0.17806129158000003), isCurved: true), PathPoint(Vector(0.15780462325000003, 0.09087318182000001, -0.17749650776), isCurved: true), PathPoint(Vector(0.15583449602000002, 0.08934528381000001, -0.17695046961000002), isCurved: true), PathPoint(Vector(0.15383951366, 0.08839616925, -0.17627698183), isCurved: true), PathPoint(Vector(0.15181899071000002, 0.08745120466, -0.17569604516), isCurved: true), PathPoint(Vector(0.14987865090000002, 0.08660160750000001, -0.1751896441), isCurved: true), PathPoint(Vector(0.14803496003000002, 0.08593653142, -0.17472562194000002), isCurved: true), PathPoint(Vector(0.14628739655, 0.08552142233000001, -0.17425775528), isCurved: true), PathPoint(Vector(0.14465075731000002, 0.08542700857, -0.17375193536000003), isCurved: true), PathPoint(Vector(0.14295867085000002, 0.08598516136, -0.17300096154000003), isCurved: true), PathPoint(Vector(0.14148002863, 0.08668064326000001, -0.17222253978000002), isCurved: true), PathPoint(Vector(0.14018499851000002, 0.08758842945, -0.17136213183000001), isCurved: true), PathPoint(Vector(0.13910335302000001, 0.08877096325000002, -0.1704428494), isCurved: true), PathPoint(Vector(0.13827872276, 0.09027569741000001, -0.16950850189000002), isCurved: true), PathPoint(Vector(0.13775606453000003, 0.09207352251, -0.16861391068), isCurved: true), PathPoint(Vector(0.13726603985000002, 0.09411316365000001, -0.16772489250000003), isCurved: true), PathPoint(Vector(0.13716524839000002, 0.09622880071, -0.16695687175), isCurved: true), PathPoint(Vector(0.13735336065, 0.09834012389, -0.16630703211000003), isCurved: true), PathPoint(Vector(0.13777433336, 0.1004204154, -0.165774405), isCurved: true), PathPoint(Vector(0.13843625784000002, 0.10245905817, -0.16538767517000003), isCurved: true), PathPoint(Vector(0.13935020566, 0.10440215468000001, -0.16518348455), isCurved: true), PathPoint(Vector(0.14024494588000003, 0.10628417134000001, -0.16519315541000001), isCurved: true), PathPoint(Vector(0.14139208198, 0.10788567364000001, -0.16528931260000002), isCurved: true), PathPoint(Vector(0.14268240333, 0.10920089483, -0.16547682881), isCurved: true), PathPoint(Vector(0.14402453601, 0.11020219326000001, -0.16571918130000002), isCurved: false)]))
        print("Time:", CFAbsoluteTimeGetCurrent() - start)
        print("Polys:", mesh.polygons.count)

        // create SCNNode
        let geometry = SCNGeometry(mesh) {
            let material = SCNMaterial()
            material.diffuse.contents = $0 as? UIColor
            return material
        }
        let node = SCNNode(geometry: geometry)
        scene.rootNode.addChildNode(node)

        // configure the SCNView
        let scnView = view as! SCNView
        scnView.scene = scene
        scnView.autoenablesDefaultLighting = true
        scnView.allowsCameraControl = true
        scnView.showsStatistics = true
        scnView.backgroundColor = .white
    }

    override var shouldAutorotate: Bool {
        return true
    }

    override var prefersStatusBarHidden: Bool {
        return true
    }
}
